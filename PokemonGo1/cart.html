<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shopping Cart - Pokemon Go Store</title>
    <link rel="stylesheet" href="styles.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="promo-banner">
      15% discount for your first Web Store purchase on any item $9.99 or more!
    </div>
    <header class="header">
      <nav class="nav">
        <div class="nav-left">
          <img
            src="assets/PokepalsLogo.png"
            alt="PokePals Logo"
            class="pokemon-logo"
          />
          <span class="store-text">Web Store</span>
        </div>
        <div class="nav-right">
          <a href="index.html" class="nav-link">Home</a>
          <a href="store.html" class="nav-link">Store</a>
          <button class="theme-toggle" aria-label="Toggle dark mode">
            <svg
              class="sun-icon"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              width="14"
              height="14"
            >
              <circle cx="12" cy="12" r="5" fill="#FFB800" />
              <path
                fill="#FFB800"
                d="M12 3v2m0 14v2M3 12h2m14 0h2m-4.8-7.2l1.4 1.4M5.6 18.4l1.4 1.4m11.4-1.4l-1.4 1.4M7 5.6l-1.4 1.4"
              />
            </svg>
            <svg
              class="moon-icon"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              width="14"
              height="14"
            >
              <path
                fill="#5468FF"
                d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-3.03 0-5.5-2.47-5.5-5.5 0-1.82.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z"
              />
            </svg>
          </button>
          <div
            class="profile-section"
            style="
              display: none;
              background: var(--profile-section-bg);
              padding: 0.5rem 1rem;
              border-radius: 24px;
              margin-left: 1rem;
            "
          >
            <a
              href="profile.html"
              class="profile-info"
              style="
                display: flex;
                align-items: center;
                gap: 0.5rem;
                text-decoration: none;
              "
            >
              <img
                src="assets/ultraball.png"
                alt="Profile Picture"
                class="profile-pic"
                style="
                  width: 32px;
                  height: 32px;
                  border-radius: 50%;
                  border: 2px solid var(--accent-color);
                "
              />
              <span
                class="profile-name"
                style="color: var(--text-color); font-weight: 500"
              ></span>
            </a>
            <button
              class="sign-out-btn"
              onclick="handleSignOut()"
              style="
                background: none;
                border: none;
                color: #ff4444;
                font-weight: 500;
                cursor: pointer;
                padding: 0.25rem 0.5rem;
                border-radius: 4px;
                margin-left: 1rem;
              "
            >
              Sign Out
            </button>
          </div>
          <button
            class="sign-in-btn"
            onclick="window.location.href='signin.html'"
            style="display: none"
          >
            Sign In
          </button>
        </div>
      </nav>
    </header>

    <main class="main">
      <div class="cart-container">
        <h1>Shopping Cart</h1>
        <div class="cart-items" id="cartItems">
          <!-- Cart items will be dynamically inserted here -->
        </div>
        <div class="cart-summary">
          <div class="summary-row">
            <span>Subtotal:</span>
            <span id="subtotal">₱0.00</span>
          </div>
          <div class="summary-row">
            <span>Discount:</span>
            <span id="discount">-₱0.00</span>
          </div>
          <div class="summary-row total">
            <span>Total:</span>
            <span id="total">₱0.00</span>
          </div>
          <button id="checkoutBtn" class="checkout-btn" disabled>
            Proceed to Checkout
          </button>
        </div>
      </div>
    </main>

    <script>
      // Check authentication status
      window.addEventListener("DOMContentLoaded", () => {
        const userData = JSON.parse(localStorage.getItem("userData"));
        const profileSection = document.querySelector(".profile-section");
        const signInBtn = document.querySelector(".sign-in-btn");
        const profileName = document.querySelector(".profile-name");

        if (!userData) {
          window.location.href = "signin.html";
          return;
        }

        profileSection.style.display = "flex";
        signInBtn.style.display = "none";
        profileName.textContent = userData.ign;
      });

      function handleSignOut() {
        localStorage.removeItem("userData");
        window.location.href = "signin.html";
      }
    </script>
    <script src="cart.js"></script>
  </body>
</html>
